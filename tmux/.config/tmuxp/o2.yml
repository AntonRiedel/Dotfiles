session_name: o2
before_script: ${HOME}/AliceVM/vagrant-up.sh
start_directory: ${HOME}/AliceVM
windows:
  - window_name: devel
    panes:
      - shell_command:
          - vagrant ssh
          - cd /home/vagrant/o2
          - alienv enter O2Physics/latest --shellrc
          - cd /home/vagrant/o2/O2Physics
          - nvim
  - window_name: build
    panes:
      - shell_command:
          - sleep 5
          - vagrant ssh
          - cd /home/vagrant/o2
          - alienv enter O2Physics/latest ninja/latest --shellrc
          - cd /home/vagrant/o2/sw/BUILD/O2Physics-latest-master/O2Physics
          - find /home/vagrant/o2/O2Physics/ | entr -pc ninja install -j$(nproc)
  - window_name: alien
    panes:
      - shell_command:
          - sleep 10
          - vagrant ssh
          - cd /home/vagrant/o2
          - alienv enter O2Physics/latest --shellrc
          - cd
  - window_name: remote
    panes:
      - shell_command:
          - sleep 15
          - vagrant ssh
  - window_name: local
    panes:
      - shell_command:
          - cd
